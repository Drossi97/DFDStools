---
import Layout from '../layouts/Layout.astro';
import Header from '../components/shared/Header.astro';
import Calendar from '../components/hoja-horas/Calendar.astro';
import DayEditor from '../components/hoja-horas/DayEditor.astro';
import SummaryView from '../components/hoja-horas/SummaryView.astro';
import CollapsibleSection from '../components/shared/CollapsibleSection.astro';

// SVG Icons
const calendarIcon = `<svg class="h-5 w-5 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
  <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
</svg>`;

const chartIcon = `<svg class="h-5 w-5 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <line x1="18" y1="20" x2="18" y2="10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  <line x1="12" y1="20" x2="12" y2="4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
  <line x1="6" y1="20" x2="6" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
</svg>`;
---

<Layout>
  <Header />
  
  <main class="min-h-screen bg-[#f4f7f9] pt-[67px]">
    <div class="container mx-auto px-4 py-6 max-w-4xl">
      <div class="flex flex-col gap-8">
        <!-- Input del nombre -->
        <div class="flex flex-col">
          <input
            id="worker-name"
            type="text"
            class="w-full h-10 px-3 py-2 text-sm border border-gray-300 rounded-md bg-gray-50 focus:outline-none focus:border-gray-400"
            placeholder="Nombre y apellidos"
          />
        </div>

        <!-- Sección del Calendario -->
        <div class="border border-gray-300 rounded-md p-4 bg-[#F9FAFB]">
          <div class="flex flex-col md:flex-row gap-6">
            <div class="md:w-1/2">
              <Calendar />
            </div>
            <div class="md:w-1/2">
              <DayEditor />
            </div>
          </div>
        </div>

        <!-- Línea separadora -->
        <hr class="border-gray-300" />

        <!-- Sección del Resumen -->
        <CollapsibleSection title="Resumen del Desglose" icon={chartIcon}>
          <SummaryView />
        </CollapsibleSection>
      </div>
    </div>
  </main>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const workerNameInput = document.getElementById('worker-name') as HTMLInputElement;

    // Sin localStorage - sin caché persistente
    // Los datos del trabajador no se guardan
  });
</script>

